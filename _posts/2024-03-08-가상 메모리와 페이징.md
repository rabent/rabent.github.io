---
title: "가상 메모리와 페이징"
layout: post
date: 2024-03-08 16:42
tag:
- CS
description: 가상 메모리와 그를 관리하는 페이징
---

# 가상 메모리(Virtual memory)란?
컴퓨터의 주 기억 장치인 RAM의 크기는 상대적으로 작다. 하지만 프로세스의 크기는 컴퓨터의 성능의 발전과 함께 점점 커지고 있다. 그렇다면 우리가 물리 메모리의 크기보다 큰 프로세스를 작동시키기 위해서는 어떻게 해야 할까?  
그를 위한 것이 **가상 메모리(Virtual memory)**이다. 가상 메모리 시스템에서 모든 프로세스는 각자 메모리 주소 0에서부터 시작하는 커다란 가상의 메모리 공간을 가진다. 이는 프로세스가 연속성이 보장되는 **논리 주소(Logical Address)**를 가지게 함으로써 프로세스가 실제 물리 메모리의 주소를 신경쓰지 않고 작동할 수 있도록 한다.  

![가상 메모리](/assets/img/가상%20메모리.png)

이러한 가상 메모리는 실제 물리 메모리와 보조 저장 장치의 스왑(Swap) 영역을 같이 사용하기에 가능하다. 지금 실행해야 할 부분만 물리 메모리에 저장하고 그 이외의 프로세스는 보조 저장 장치의 스왑 영역에 저장하는 것이다.  

## 동적 주소 변환(Dynamic Address Translation)
가상 메모리의 논리 주소는 실제 물리 메모리의 물리 주소와는 다르므로 **동적 주소 변환(Dynamic Address Translation)**을 거쳐서 물리 주소로 변환해 주어야 한다. 이를 통해 프로세스는 가상 메모리를 물리 메모리처럼 사용할 수 있다. 주로 MMU(Memory Management Unit) 등의 하드웨어의 도움을 받아 이루어진다.

# 가상 메모리의 분할  
물리 메모리의 주소 하나하나를 모두 MMU가 관리하고 변환해주는 것은 오버헤드가 매우 클 것이다. 따라서 MMU는 물리 메모리를 일정 단위로 쪼개서 관리하게 된다.  
만약 가상 메모리를 사용하지 않고 모든 프로그램을 물리 메모리에 연속적으로 저장한다고 가정해보자. 이러한 방식을 **연속 메모리 할당** 이라고 하는데 연속 메모리 할당에는 두 가지 분할 방식, 고정 분할과 동적 분할이 존재한다.  
고정 분할은 물리 메모리를 특정한 크기의 파티션으로 나누어 관리한다. 동적 분할은 프로세스의 크기에 딱 맞는 크기의 메모리를 할당한다.  
만약 가상 메모리를 사용하게 된다면 더 이상 연속적으로 물리 메모리에 저장할 필요가 없기에 **비연속 메모리 할당**을 하게 되는데, 비연속 메모리 할당은 가변 분할인  **세그멘테이션(Segmentation)** 과 고정 분할인 **페이징(Paging)**으로 나뉘게 된다.  

# 메모리 단편화(Memory Fragmentation)

